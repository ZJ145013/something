# é”šç‚¹ - èŠ‚ç‚¹è®¢é˜…çš„å‚æ•° [æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 6 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
# NodeParam: &NodeParam {type: http, interval: 3600, health-check: {enable: true, url: 'http://www.google.com/blank.html', interval: 6}}

# proxy-providers:
#   ç»„åˆè®¢é˜…:
#     # ç±»å‹
#     # type: http
#     # è®¢é˜…é“¾æ¥
#     # è‡ªåŠ¨æ›´æ–°æ—¶é—´è®¾ç½®
#     # interval: 3600
#     # å¥åº·æ£€æŸ¥
#     # health-check:
#     #   enable: true
#     #   interval: 600
#     #   # lazy: true
#     #   url: http://www.gstatic.com/generate_204
#     # ä½¿ç”¨é”šç‚¹ï¼Œä»£è¡¨ä»¥ä¸Šæ‰€æœ‰å‚æ•°
#     <<: *NodeParam
#     url: "url"
#     path: ./ç»„åˆè®¢é˜….yaml



# ç­–ç•¥ç»„å‚æ•°é”šç‚¹
# é”šç‚¹ - æ—¶å»¶ä¼˜é€‰å‚æ•° [æ¯ 6 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œå®¹å·® 20msï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡åˆ™è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
UrlTest: &UrlTest {type: url-test, interval: 6, tolerance: 20, lazy: true, url: 'http://www.google.com/blank.html', disable-udp: false, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}
# é”šç‚¹ - æ•…éšœè½¬ç§»å‚æ•° [æ¯ 6 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡åˆ™è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
FallBack: &FallBack {type: fallback, interval: 6, lazy: true, url: 'http://www.google.com/blank.html', disable-udp: false, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}
# é”šç‚¹ - è´Ÿè½½å‡è¡¡å‚æ•° [æ¯ 6 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡åˆ™è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
LoadBalance: &LoadBalance {type: load-balance, interval: 6, lazy: true, url: 'http://www.google.com/blank.html', disable-udp: false, strategy: consistent-hashing, timeout: 2000, max-failed-times: 3, hidden: true, include-all: true}
# é”šç‚¹ - è§„åˆ™å‚æ•° [æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…è§„åˆ™ï¼Œæ›´æ–°è§„åˆ™æ—¶ä½¿ç”¨ç›´è¿ç­–ç•¥]
RuleProviders: &RuleProviders {type: http, behavior: classical, interval: 3600, format: yaml, proxy: DIRECT}

# é”šç‚¹ - èŠ‚ç‚¹ç­›é€‰ç»„
FilterHK: &FilterHK '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|HKG|Hong)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterTW: &FilterTW '^(?=.*((?i)ğŸ‡¹ğŸ‡¼|å°æ¹¾|(\b(TW|TWN|Tai|Taiwan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterJP: &FilterJP '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|JPN|Japan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterKR: &FilterKR '^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|(\b(KR|KOR|Korea)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterSG: &FilterSG '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|SGP|Singapore)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterUS: &FilterUS '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|USA|United States)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterUK: &FilterUK '^(?=.*((?i)ğŸ‡¬ğŸ‡§|è‹±å›½|ä¼¦æ•¦|(\b(UK|GBR|United Kingdom)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterFR: &FilterFR '^(?=.*((?i)ğŸ‡«ğŸ‡·|æ³•å›½|(\b(FR|FRA|France)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterDE: &FilterDE '^(?=.*((?i)ğŸ‡©ğŸ‡ª|å¾·å›½|(\b(DE|DEU|Germany)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$'
FilterGame: &FilterGame '^(?=.*((?i)æ¸¸æˆ|ğŸ®|(\b(GAME)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­)).*$'
FilterAll: &FilterAll '^(?=.*(.))(?!.*((?i)ç¾¤|é‚€è¯·|è¿”åˆ©|å¾ªç¯|å®˜ç½‘|å®¢æœ|ç½‘ç«™|ç½‘å€|è·å–|è®¢é˜…|æµé‡|åˆ°æœŸ|æœºåœº|ä¸‹æ¬¡|ç‰ˆæœ¬|å®˜å€|å¤‡ç”¨|è¿‡æœŸ|å·²ç”¨|è”ç³»|é‚®ç®±|å·¥å•|è´©å–|é€šçŸ¥|å€’å–|é˜²æ­¢|å›½å†…|åœ°å€|é¢‘é“|æ— æ³•|è¯´æ˜|ä½¿ç”¨|æç¤º|ç‰¹åˆ«|è®¿é—®|æ”¯æŒ|æ•™ç¨‹|å…³æ³¨|æ›´æ–°|ä½œè€…|åŠ å…¥|è¶…æ—¶|æ”¶è—|ç¦åˆ©|é‚€è¯·|å¥½å‹|å¤±è”|(\b(USE|USED|TOTAL|EXPIRE|EMAIL|Panel|Channel|Author|Traffic)(\d+)?\b|(\d{4}-\d{2}-\d{2}|\dG)))).*$'

# é”šç‚¹ - èŠ‚ç‚¹ç­›é€‰ç»„ - ä¼˜è´¨è·³æ¿ (é¦™æ¸¯/æ—¥æœ¬/éŸ©å›½)
# FilterTransit: &FilterTransit 'é¦™æ¸¯ä¸“çº¿|é¦™æ¸¯é«˜é€Ÿ|æ—¥æœ¬ä¸“çº¿|æ—¥æœ¬é«˜é€Ÿ|éŸ©å›½ä¸“çº¿|éŸ©å›½é«˜é€Ÿ'

# =========================
# ä»£ç†ç»„é…ç½®
# =========================
# - select:    æ‰‹åŠ¨åˆ‡æ¢ï¼ˆæ¨èï¼‰
# - url-test:  è‡ªåŠ¨æµ‹é€Ÿæ‹©ä¼˜ï¼ˆå®šæ—¶æ¢æµ‹å¹¶é€‰å»¶è¿Ÿæœ€ä½è€…ï¼‰
# - DIRECT:    ç›´è¿ï¼Œä¸èµ°ä»£ç†
# - REJECT:    æ‹’ç»è¿æ¥ï¼ˆä¸€èˆ¬ç”¨äºå¹¿å‘Šæµé‡ï¼‰
# =========================
proxy-groups:
  # --- æ ¸å¿ƒé€‰æ‹©ç­–ç•¥ ---
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - âš¡ è‡ªåŠ¨é€‰æ‹©
      - ğŸ– æ‰‹åŠ¨é€‰æ‹©
      # - â›“ï¸ ç¾å›½é“¾å¼ä»£ç† # å¦‚éœ€ä½¿ç”¨é“¾å¼ä»£ç†ï¼Œè¯·å–æ¶ˆæœ¬è¡Œæ³¨é‡Š
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¸ğŸ‡¬ æ–°å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¬ğŸ‡§ è‹±å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡«ğŸ‡· æ³•å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡©ğŸ‡ª å¾·å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ”’ å›½å†…æœåŠ¡

  - name: ğŸ– æ‰‹åŠ¨é€‰æ‹©
    type: select
    url: 'http://www.google.com/blank.html'
    include-all: true
    filter: *FilterAll

  - name: âš¡ è‡ªåŠ¨é€‰æ‹©
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    # ä¼˜åŒ–ï¼šåŒæ ·ä½¿ç”¨FilterAllé¿å…æ— æ•ˆèŠ‚ç‚¹å‚ä¸æµ‹é€Ÿ
    filter: *FilterAll

  # --- é“¾å¼ä»£ç†ä¸“ç”¨ç­–ç•¥ç»„ (é»˜è®¤ä¸å¯ç”¨) ---
  # å¦‚éœ€å¯ç”¨ï¼Œè¯·å–æ¶ˆä»¥ä¸‹æ³¨é‡Šï¼Œå¹¶åŒæ—¶å–æ¶ˆ proxies éƒ¨åˆ†å’Œâ€œğŸš€ èŠ‚ç‚¹é€‰æ‹©â€ä¸­å¯¹åº”æ¡ç›®çš„æ³¨é‡Š
  # - name: ğŸš€ æœ€ä½³è·³æ¿
  #   <<: *UrlTest
  #   use: [ç»„åˆè®¢é˜…]
  #   filter: *FilterTransit
  # - name: â›“ï¸ ç¾å›½é“¾å¼ä»£ç†
  #   type: select
  #   proxies:
  #     - DIRECT
  #     - 'US-hysteria2'
  #     - 'US-vless-reality'

  # --- åŠŸèƒ½æ€§è‡ªåŠ¨ç­–ç•¥ç»„ ---
  # ä¿®å¤ï¼šä¸ºæ‰€æœ‰åŒºåŸŸç­–ç•¥ç»„æ·»åŠ  `use: [ç»„åˆè®¢é˜…]`
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterHK
  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterTW
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterJP
  - name: ğŸ‡°ğŸ‡· éŸ©å›½è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterKR
  - name: ğŸ‡¸ğŸ‡¬ æ–°å›½è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterSG
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterUS
  - name: ğŸ‡¬ğŸ‡§ è‹±å›½è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterUK
  - name: ğŸ‡«ğŸ‡· æ³•å›½è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterFR
  - name: ğŸ‡©ğŸ‡ª å¾·å›½è‡ªåŠ¨ç­–ç•¥
    <<: *UrlTest
    # use: [ç»„åˆè®¢é˜…]
    filter: *FilterDE

  # --- åº”ç”¨åˆ†æµç­–ç•¥ ---
  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
  - name: ğŸ’¬ AI æœåŠ¡
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¸ğŸ‡¬ æ–°å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ“¹ æ²¹ç®¡è§†é¢‘
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ” è°·æ­ŒæœåŠ¡
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬è‡ªåŠ¨ç­–ç•¥
      - ğŸ‡¸ğŸ‡¬ æ–°å›½è‡ªåŠ¨ç­–ç•¥
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ  ç§æœ‰ç½‘ç»œ
    type: select
    proxies:
      - DIRECT
  - name: ğŸ”’ å›½å†…æœåŠ¡
    type: select
    proxies:
      - DIRECT
  - name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ± Github
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ è‹¹æœæœåŠ¡
    type: select
    proxies:
      - DIRECT
      - ğŸ‡ºğŸ‡¸ ç¾å›½è‡ªåŠ¨ç­–ç•¥
  - name: ğŸŒ ç¤¾äº¤åª’ä½“
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ¬ æµåª’ä½“
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
  - name: ğŸ“š æ•™è‚²èµ„æº
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
  - name: â˜ï¸ äº‘æœåŠ¡
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT
  - name: ğŸŒ éä¸­å›½
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT



# =========================
# åŸºç¡€é…ç½®
# =========================
port: 7890                         # æœ¬æœº HTTP ä»£ç†ç«¯å£
socks-port: 7891                   # æœ¬æœº SOCKS5 ä»£ç†ç«¯å£
allow-lan: true                    # å…è®¸å±€åŸŸç½‘è®¾å¤‡è¿æ¥ï¼ˆå¦‚ä¸å…±äº«ï¼Œå»ºè®®æ”¹ä¸º falseï¼‰
mode: rule                         # æŒ‰è§„åˆ™åˆ†æµï¼ˆglobal ä¼šå…¨å±€èµ°åŒä¸€è·¯ç”±ï¼‰
log-level: info                    # ç”Ÿäº§é»˜è®¤ infoï¼›æ’éšœéœ€è¦æ”¹ debug
unified-delay: true                # ä»¥â€œå®Œæˆæ¡æ‰‹åâ€çš„ RTT ç»Ÿè®¡å»¶è¿Ÿï¼Œæ›´è´´è¿‘çœŸå®ä½“éªŒ
tcp-concurrent: true               # å¹¶å‘æ‹¨å·æ‹©ä¼˜ä¿ç•™ï¼Œè·¨å¢ƒç½‘ç»œé€šå¸¸æ›´ç¨³æ›´å¿«
find-process-mode: strict          # æ›´ç²¾å‡†åœ°è¯†åˆ«è¿æ¥æ¥æºè¿›ç¨‹ï¼ˆWindows éœ€ç®¡ç†å‘˜æƒé™ï¼‰
global-client-fingerprint: chrome  # ç»Ÿä¸€ TLS æŒ‡çº¹ä¸º Chromeï¼›å¦‚é‡ä¸ªåˆ«ç«™ç‚¹æ ¡éªŒå¯æ”¹ randomized



# =========================
# DNSé…ç½®
# =========================
# dns:
#     enable: true
#     listen: '127.0.0.1:5335'
#     use-system-hosts: false        # è‹¥ä½ æ”¹è¿‡ç³»ç»Ÿ hostsï¼Œå¯æ”¹ä¸º true
#     enhanced-mode: fake-ip         # ä½¿ç”¨è™šæ‹Ÿ IP æå‡å…¼å®¹æ€§ä¸åˆ†æµç²¾åº¦
#     fake-ip-range: 198.18.0.1/16   # æ¨èä»ç½‘æ®µåŸºåœ°å€ .0 å¼€å§‹ï¼ˆIETF é¢„ç•™æµ‹è¯•ç½‘æ®µï¼‰

#     # bootstrapï¼šè§£æ DoH/DoT åŸŸåçš„èµ·å§‹è§£æå™¨ï¼ˆçº¯ IPã€ç›´è¿å¯è¾¾ï¼‰
#     default-nameserver: [180.76.76.76, 182.254.118.118, 8.8.8.8, 180.184.2.2]

#     # ç›´è¿çš„ä¸»ä¸Šæ¸¸è§£æå™¨ï¼ˆå›½å†…ç¯å¢ƒå¸¸ä½œä¸ºâ€œæœ¬åœ°ä¼˜å…ˆâ€ï¼‰
#     nameserver: [180.76.76.76, 119.29.29.29, 180.184.1.1, 223.5.5.5, 8.8.8.8, 'https://223.6.6.6/dns-query#h3=true', 'https://dns.alidns.com/dns-query', 'https://cloudflare-dns.com/dns-query', 'https://doh.pub/dns-query']

#     # æµ·å¤–ä¼˜å…ˆå…œåº•è§£æ
#     fallback: ['https://000000.dns.nextdns.io/dns-query#h3=true', 'https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query', 'https://public.dns.iij.jp/dns-query', 'https://101.101.101.101/dns-query', 'https://208.67.220.220/dns-query', 'tls://8.8.4.4', 'tls://1.0.0.1:853', 'https://cloudflare-dns.com/dns-query', 'https://dns.google/dns-query']
    
#     # è§¦å‘ fallback çš„åˆ¤æ®
#     fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32, 127.0.0.1/32], domain: [+.google.com, +.facebook.com, +.twitter.com, +.youtube.com, +.xn--ngstr-lra8j.com, +.google.cn, +.googleapis.cn, +.googleapis.com, +.gvt1.com] }
    
#     # å¯¹è¿™äº›åŸŸå/åœºæ™¯ä¸ä½¿ç”¨ fake-ipï¼Œé¿å…è¿é€šæ€§/è®¤è¯å¼‚å¸¸
#     fake-ip-filter: ['*.lan', 'stun.*.*.*', 'stun.*.*', time.windows.com, time.nist.gov, time.apple.com, time.asia.apple.com, '*.ntp.org.cn', '*.openwrt.pool.ntp.org', time1.cloud.tencent.com, time.ustc.edu.cn, pool.ntp.org, ntp.ubuntu.com, ntp.aliyun.com, ntp1.aliyun.com, ntp2.aliyun.com, ntp3.aliyun.com, ntp4.aliyun.com, ntp5.aliyun.com, ntp6.aliyun.com, ntp7.aliyun.com, time1.aliyun.com, time2.aliyun.com, time3.aliyun.com, time4.aliyun.com, time5.aliyun.com, time6.aliyun.com, time7.aliyun.com, '*.time.edu.cn', time1.apple.com, time2.apple.com, time3.apple.com, time4.apple.com, time5.apple.com, time6.apple.com, time7.apple.com, time1.google.com, time2.google.com, time3.google.com, time4.google.com, music.163.com, '*.music.163.com', '*.126.net', musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, '*.kuwo.cn', api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, '*.y.qq.com', streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, '*.xiami.com', '*.music.migu.cn', music.migu.cn, '*.msftconnecttest.com', '*.msftncsi.com', localhost.ptlogin2.qq.com, '*.*.*.srv.nintendo.net', '*.*.stun.playstation.net', 'xbox.*.*.microsoft.com', '*.ipv6.microsoft.com', '*.*.xboxlive.com', speedtest.cros.wr.pvp.net]

dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - geosite:private
    - geosite:category-ntp
  use-hosts: false
  use-system-hosts: false
  nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
  nameserver-policy:
    geosite:cn:
      - https://223.5.5.5/dns-query
      - https://223.6.6.6/dns-query
  respect-rules: true
  direct-nameserver:
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
  direct-nameserver-follow-policy: true    #ä¼˜å…ˆè®©nameserver-policyçš„è®¾å®šç”Ÿæ•ˆ

# =========================
# é…ç½®æ–‡ä»¶ç®¡ç†
# =========================
profile:
  store-selected: true             # è®°ä½ä¸Šæ¬¡é€‰æ‹©çš„ç­–ç•¥/èŠ‚ç‚¹
  store-fake-ip: false             # å­˜å‚¨ fake-ip æ˜ å°„ä¼šå¯¼è‡´DNSæ³„éœ²

# =========================
# åŸŸå/æµé‡å—…æ¢
# =========================
sniffer:
  enable: true
  parse-pure-ip: true              # å¯¹ç›´è¿ IP è¿æ¥å°è¯•è§£æå‡º SNI/Host
  sniff:
    TLS:
      ports: [443, 8443]           # è¦å—…æ¢çš„ TLS æµé‡ç«¯å£ï¼ŒåŒ…æ‹¬æ ‡å‡† HTTPS ç«¯å£ 443 å’Œå¤‡ç”¨çš„ 8443
    HTTP:
      ports: [80, 8080-8880]       # è¦å—…æ¢çš„ HTTP æµé‡ç«¯å£ï¼ŒåŒ…æ‹¬æ ‡å‡† HTTP ç«¯å£ 80 å’Œå¸¸ç”¨çš„ 8080-8880
      override-destination: true   # ç”¨å—…æ¢åˆ°çš„åŸŸåè¦†ç›–åŸå§‹ç›®æ ‡ IP/åŸŸå

# =========================
# Geo æ•°æ®è·å–
# =========================
geodata-mode: true
geo-auto-update: true
geodata-loader: standard
geo-update-interval: 24
geox-url:
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
  asn: https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb

# =========================
# è§„åˆ™é›†è·å–
# =========================
rule-providers:
  category-ads-all:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ads-all.mrs
    path: ./ruleset/category-ads-all.mrs
    interval: 86400
  category-ai-chat-!cn:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-chat-!cn.mrs
    path: ./ruleset/category-ai-chat-!cn.mrs
    interval: 86400
  youtube:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs
    path: ./ruleset/youtube.mrs
    interval: 86400
  google:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs
    path: ./ruleset/google.mrs
    interval: 86400
  private:
    type: http
    format: mrs
    behavior: ipcidr
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/private.mrs
    path: ./ruleset/private.mrs
    interval: 86400
  geolocation-cn:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-cn.mrs
    path: ./ruleset/geolocation-cn.mrs
    interval: 86400
  cn:
    type: http
    format: mrs
    behavior: ipcidr
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs
    path: ./ruleset/cn.mrs
    interval: 86400
  telegram:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs
    path: ./ruleset/telegram.mrs
    interval: 86400
  github:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.mrs
    path: ./ruleset/github.mrs
    interval: 86400
  gitlab:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/gitlab.mrs
    path: ./ruleset/gitlab.mrs
    interval: 86400
  microsoft:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs
    path: ./ruleset/microsoft.mrs
    interval: 86400
  apple:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs
    path: ./ruleset/apple.mrs
    interval: 86400
  facebook:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs
    path: ./ruleset/facebook.mrs
    interval: 86400
  instagram:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/instagram.mrs
    path: ./ruleset/instagram.mrs
    interval: 86400
  twitter:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/twitter.mrs
    path: ./ruleset/twitter.mrs
    interval: 86400
  tiktok:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs
    path: ./ruleset/tiktok.mrs
    interval: 86400
  linkedin:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/linkedin.mrs
    path: ./ruleset/linkedin.mrs
    interval: 86400
  netflix:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs
    path: ./ruleset/netflix.mrs
    interval: 86400
  hulu:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hulu.mrs
    path: ./ruleset/hulu.mrs
    interval: 86400
  disney:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.mrs
    path: ./ruleset/disney.mrs
    interval: 86400
  hbo:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.mrs
    path: ./ruleset/hbo.mrs
    interval: 86400
  amazon:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.mrs
    path: ./ruleset/amazon.mrs
    interval: 86400
  bahamut:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bahamut.mrs
    path: ./ruleset/bahamut.mrs
    interval: 86400
  steam:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.mrs
    path: ./ruleset/steam.mrs
    interval: 86400
  epicgames:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/epicgames.mrs
    path: ./ruleset/epicgames.mrs
    interval: 86400
  ea:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ea.mrs
    path: ./ruleset/ea.mrs
    interval: 86400
  ubisoft:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/ubisoft.mrs
    path: ./ruleset/ubisoft.mrs
    interval: 86400
  blizzard:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/blizzard.mrs
    path: ./ruleset/blizzard.mrs
    interval: 86400
  coursera:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/coursera.mrs
    path: ./ruleset/coursera.mrs
    interval: 86400
  edx:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/edx.mrs
    path: ./ruleset/edx.mrs
    interval: 86400
  udemy:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/udemy.mrs
    path: ./ruleset/udemy.mrs
    interval: 86400
  khanacademy:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/khanacademy.mrs
    path: ./ruleset/khanacademy.mrs
    interval: 86400
  category-scholar-!cn:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-scholar-!cn.mrs
    path: ./ruleset/category-scholar-!cn.mrs
    interval: 86400
  aws:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/aws.mrs
    path: ./ruleset/aws.mrs
    interval: 86400
  azure:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/azure.mrs
    path: ./ruleset/azure.mrs
    interval: 86400
  digitalocean:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/digitalocean.mrs
    path: ./ruleset/digitalocean.mrs
    interval: 86400
  heroku:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/heroku.mrs
    path: ./ruleset/heroku.mrs
    interval: 86400
  dropbox:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/dropbox.mrs
    path: ./ruleset/dropbox.mrs
    interval: 86400
  geolocation-!cn:
    type: http
    format: mrs
    behavior: domain
    url: https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/geolocation-!cn.mrs
    path: ./ruleset/geolocation-!cn.mrs
    interval: 86400

# =========================
# åˆ†æµè§„åˆ™
# =========================
rules: # æ³¨æ„ï¼Œåˆ†æµè§„åˆ™æ˜¯æŒ‰è‡ªä¸Šè€Œä¸‹ã€é¦–æ¬¡å‘½ä¸­å³åœçš„åŸåˆ™è¿›è¡ŒåŒ¹é…ï¼Œå› æ­¤é‡è¦çš„è§„åˆ™åº”è¯¥æ”¾å‰é¢
 - DOMAIN-KEYWORD,shanghailife,ğŸ”’ å›½å†…æœåŠ¡
 - DOMAIN-KEYWORD,modelscope,ğŸ”’ å›½å†…æœåŠ¡
 - DOMAIN-SUFFIX,colin1112.me,ğŸ”’ å›½å†…æœåŠ¡
 - DOMAIN-SUFFIX,69yun69.com,ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨ç­–ç•¥
 - RULE-SET,category-ads-all,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
 - RULE-SET,category-ai-chat-!cn,ğŸ’¬ AI æœåŠ¡
 - RULE-SET,youtube,ğŸ“¹ æ²¹ç®¡è§†é¢‘
 - RULE-SET,coursera,ğŸ“š æ•™è‚²èµ„æº
 - RULE-SET,edx,ğŸ“š æ•™è‚²èµ„æº
 - RULE-SET,udemy,ğŸ“š æ•™è‚²èµ„æº
 - RULE-SET,khanacademy,ğŸ“š æ•™è‚²èµ„æº
 - RULE-SET,category-scholar-!cn,ğŸ“š æ•™è‚²èµ„æº
 - RULE-SET,google,ğŸ” è°·æ­ŒæœåŠ¡
 - RULE-SET,google,ğŸ” è°·æ­ŒæœåŠ¡,no-resolve
 - RULE-SET,private,ğŸ  ç§æœ‰ç½‘ç»œ,no-resolve
 - RULE-SET,geolocation-cn,ğŸ”’ å›½å†…æœåŠ¡
 - RULE-SET,cn,ğŸ”’ å›½å†…æœåŠ¡,no-resolve
 - RULE-SET,telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
 - RULE-SET,github,ğŸ± Github
 - RULE-SET,gitlab,ğŸ± Github
 - RULE-SET,microsoft,â“‚ï¸ å¾®è½¯æœåŠ¡
 - RULE-SET,apple,ğŸ è‹¹æœæœåŠ¡
 - RULE-SET,facebook,ğŸŒ ç¤¾äº¤åª’ä½“
 - RULE-SET,instagram,ğŸŒ ç¤¾äº¤åª’ä½“
 - RULE-SET,twitter,ğŸŒ ç¤¾äº¤åª’ä½“
 - RULE-SET,tiktok,ğŸŒ ç¤¾äº¤åª’ä½“
 - RULE-SET,linkedin,ğŸŒ ç¤¾äº¤åª’ä½“
 - RULE-SET,netflix,ğŸ¬ æµåª’ä½“
 - RULE-SET,hulu,ğŸ¬ æµåª’ä½“
 - RULE-SET,disney,ğŸ¬ æµåª’ä½“
 - RULE-SET,hbo,ğŸ¬ æµåª’ä½“
 - RULE-SET,amazon,ğŸ¬ æµåª’ä½“
 - RULE-SET,bahamut,ğŸ¬ æµåª’ä½“
 - RULE-SET,steam,ğŸ® æ¸¸æˆå¹³å°
 - RULE-SET,epicgames,ğŸ® æ¸¸æˆå¹³å°
 - RULE-SET,ea,ğŸ® æ¸¸æˆå¹³å°
 - RULE-SET,ubisoft,ğŸ® æ¸¸æˆå¹³å°
 - RULE-SET,blizzard,ğŸ® æ¸¸æˆå¹³å°
 - RULE-SET,aws,â˜ï¸ äº‘æœåŠ¡
 - RULE-SET,azure,â˜ï¸ äº‘æœåŠ¡
 - RULE-SET,digitalocean,â˜ï¸ äº‘æœåŠ¡
 - RULE-SET,heroku,â˜ï¸ äº‘æœåŠ¡
 - RULE-SET,dropbox,â˜ï¸ äº‘æœåŠ¡
 - RULE-SET,geolocation-!cn,ğŸŒ éä¸­å›½
 - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
